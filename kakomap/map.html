<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>지도 생성하기</title>
</head>
<body>
    <div id="mapBtns">
    <!-- 지도 위치 변경 버튼들을 담고 있는 컨테이너입니다.    -->

        <button class="btn" data-map="[37.5088099, 126.8912061]">신도림</button>
        <button class="btn" data-map="[37.51241515961289, 126.86565399169922]">양천구청</button>
        <button class="btn" data-map="[37.6438741, 126.6690268]">장기</button> 
        <!-- 데이터를 태그에 저장 dateset / 각 버튼은 특정 위치의 위도와 경도를 data-map 속성에 저장하고 있습니다. 버튼을 클릭하면 해당 위치로 지도가 이동합니다. -->
   </div>

        <!--  // 직관적인 코드 예시 
        <button class="btn" data-map="[위도, 경도]">신도림</button>    
        <button class="btn" data-map0=37.5088099 data-map1=126.8912061>신도림</button>
        <button class="btn" data-map0=37.51241515961289 data-map1=126.86565399169922>양천구청</button>
        <button class="btn" data-map0=37.6438741 data-map1=126.6690268>장기</button> -->


    <div id="map" style="width:100%;height:350px;"></div>
    <!-- 지도를 표시할 컨테이너입니다. style="width:100%;height:350px;"는 지도의 크기를 지정합니다 -->
    
    



<script type="text/javascript" src="http://dapi.kakao.com/v2/maps/~~~"></script>
<!-- Kakao 지도 API를 불러오는 스크립트입니다. appkey를 통해 인증받습니다 -->

<script>
    mapoutput (37.5088099, 126.8912061);
    // 초기 지도를 신도림 위치로 설정합니다

    const btns = document.querySelectorAll("#mapBtns .btn") // 아이디 꼭 사용하기
    // 컨테이너 내의 모든 .btn 클래스를 가진 버튼들을 선택합니다

    btns.forEach(function( ele , idx ){
    // 각 버튼에 대해 클릭 이벤트 리스너를 추가합니다

        ele.addEventListener('click', function(){
            // 버튼 클릭 시, data-map 속성 값을 JSON 형식에서 JavaScript 배열로 변환하여 지도 위치를 업데이트합니다
            // data-변수명 = 값 형태로 태그에 직접 삽입
            // 자바스크립트가 접근할때는 dataset. 변수명으로 접근

            console.log("처음 데이터 타입확인", typeof this.dataset.map );
            // 목적: data-map 속성의 데이터 타입을 확인합니다
            // 동작: this.dataset.map은 data-map 속성의 값을 문자열로 가져옵니다. typeof를 사용하여 이 값의 데이터 타입을 출력합니다
            // 출력 예시: 처음 데이터 타입확인 string

            const convertDB = JSON.parse(this.dataset.map);
            // 목적: 문자열로 되어 있는 data-map 속성 값을 JavaScript 배열로 변환합니다
            // 동작: JSON.parse() 메서드를 사용하여 JSON 형식의 문자열을 JavaScript 배열로 변환합니다
            // 변환 전: "[37.5088099, 126.8912061]" (문자열)
            // 변환 후: [37.5088099, 126.8912061] (JavaScript 배열)

            console.log("피싱 이후 타입확인", typeof convertDB, convertDB[0]);
            // 목적: 변환된 데이터의 타입과 첫 번째 요소를 확인합니다
            // 동작: convertDB의 데이터 타입과 첫 번째 요소(convertDB[0])를 출력합니다
            // 출력 예시: 피싱 이후 타입확인 object 37.5088099
            // typeof convertDB는 object를 반환합니다
            // convertDB[0]는 변환된 배열의 첫 번째 요소를 반환합니다
           

            mapoutput (convertDB[0], convertDB[1]);
            // 목적: 변환된 좌표 값을 사용하여 지도를 업데이트합니다
            // 동작: mapoutput 함수가 convertDB 배열의 첫 번째 요소(convertDB[0])와 두 번째 요소(convertDB[1])를 매개변수로 받아 실행됩니다
        })
    })

    function mapoutput (a, b){
    // 주어진 위도(a)와 경도(b) 값을 사용하여 지도를 설정합니다

        const mapContainer = document.getElementById('map'),
        // 지도 컨테이너를 선택합니다.

        mapOption = { 
        center: new kakao.maps.LatLng(a, b), 
        level: 3 
        // 지도 옵션을 설정합니다. 중심 좌표와 확대 수준을 지정합니다
    };
    const map = new kakao.maps.Map(mapContainer, mapOption); 
    // 새로운 지도를 생성하여 mapContainer에 표시합니다
    }

    
</script>
</body>
</html>

